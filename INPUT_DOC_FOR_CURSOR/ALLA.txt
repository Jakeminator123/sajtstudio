========================================
MODELLOVERSIKT + API-SETUP FÖR MIN HEMSIDA
========================================

MÅL
----
- Jag har en hemsida som anropar OpenAI:s API.
- Jag vill kunna byta mellan modeller utan att skriva om hela koden.
- Jag vill kunna slå på/av webbsök (WebSearch) för live-fakta.
- Jag vill att både människor och modellen själv ska förstå hur detta är tänkt.

----------------------------------------
1. API-ALTERNATIV (VILKEN ENDPOINT?)
----------------------------------------

A) REKOMMENDERAD: RESPONSES API
   - Endpoint: POST https://api.openai.com/v1/responses
   - Stödjer:
     - Alla moderna modeller (gpt-4.1, gpt-5.1, 4o, o3-mini, o4-mini m.fl.)
     - Tools (inkl. "web_search")
     - Mer avancerade features (structured outputs, file_search osv)

   Grundstruktur (logiskt, ej språkberoende):

   request_body = {
     "model": "<MODEL_NAMN>",
     "input": "<USER_TEXT>",
     "tools": [
       { "type": "web_search" }   // valfritt; aktiverar webbsök
     ]
   }

   response:
   - response.output[n].content[m].text  innehåller modellens text
   - om web_search används kommer det finnas tool-calls i output före/samtidigt med texten.

B) ÄLDRE: CHAT COMPLETIONS API
   - Endpoint: POST https://api.openai.com/v1/chat/completions
   - Fungerar fortfarande med många modeller, men:
     - Ingen inbyggd WebSearch-tool.
     - Rekommendationen från OpenAI är att gå över till Responses API.

   Jag använder CHAT endast om jag *måste* för legacy-kod.
   Ny funktionalitet ska använda RESPONSES.


----------------------------------------
2. MODELLFAMILJER JAG ANVÄNDER
----------------------------------------

Jag delar in modellerna i tre huvudgrupper:

(1) GPT-x FÖR ALLMÄN ANVÄNDNING
    - GPT-4o-familjen
      - "gpt-4o"
      - "gpt-4o-mini"
      - Bra balans: snabb, relativt billig, bra kvalitet.
      - Kan använda WebSearch via Responses + tools.

    - GPT-4.1-familjen
      - "gpt-4.1"
      - "gpt-4.1-mini"
      - (ev. "gpt-4.1-nano" om jag använder den)
      - En naturlig uppgradering från 4o, smartare och mer robust.
      - Funkar bra som standardmodell i de flesta fall.

    - GPT-5-familjen (om tillgänglig i mitt konto)
      - "gpt-5.1"
      - "gpt-5.1-mini"
      - Nyare generation, ännu bättre text- och kodkvalitet.
      - Används när jag vill ha extra bra kvalitet eller reasoning,
        men inte vill hela vägen upp till rena "o"-modeller.

(2) O-SERIEN (REASONING-MODELLER)
    - Exempel: "o3-mini", "o4-mini", "o1"
    - Styrkor:
      - Extra fokus på kedjat resonemang, logik, problem-lösning.
      - Bra för svåra frågor där korrekthet och logik är viktigare än hastighet.
    - Nackdel:
      - Dyrare per fråga och ofta lite långsammare än vanlig GPT-modell.
    - Kan också använda WebSearch via tools.

(3) WEBSEARCH (INTE EN MODELL, UTAN ETT VERKTYG)
    - WebSearch är INTE en egen "modell", utan ett "tool":
      { "type": "web_search" }
    - WebSearch fungerar ihop med moderna modeller i RESPONSES API.
    - När WebSearch är aktiverat:
      - Modellen kan göra webbförfrågningar.
      - Svaret innehåller ofta källor/länkar.


----------------------------------------
3. MATRIS: MODELLFAMILJ vs API vs WEBSEARCH
----------------------------------------

Legend:
- Responses = /v1/responses
- Chat     = /v1/chat/completions
- WebSearch = tools: [{ "type": "web_search" }]

Tabell (konceptuellt):

  Modellfamilj        | Exempelmodeller             | Responses API | Chat API | WebSearch via tools
  --------------------+-----------------------------+--------------+----------+---------------------
  GPT-4o              | gpt-4o, gpt-4o-mini         | JA           | JA       | JA (Responses)
  GPT-4.1             | gpt-4.1, gpt-4.1-mini       | JA           | JA       | JA (Responses)
  GPT-5               | gpt-5.1, gpt-5.1-mini       | JA           | JA       | JA (Responses)
  O-serien            | o3-mini, o4-mini, o1        | JA           | ibland   | JA (Responses)
  "WebSearch"         | (tool: type=web_search)     | JA (tool)    | NEJ      | - (är själva verktyget)


----------------------------------------
4. STANDARDVAL FÖR MIN HEMSIDA
----------------------------------------

När inte något annat anges gäller:

- Standard-API:
  - RESPONSES API (https://api.openai.com/v1/responses)

- Standardmodell (utan krav på tung reasoning):
  - "gpt-4.1-mini"
  - alternativt "gpt-5.1-mini" om den finns och fungerar bra i min miljö.

- WebSearch:
  - AV som default (ingen "tools"-lista).
  - PÅ endast när:
    - användaren uttryckligen ber om senaste nyheter, aktuell fakta eller liknande
    - eller när backend-lagret/värden anger att realtidsdata krävs.

- Reasoning-modell:
  - "o3-mini" eller liknande används endast när jag explicit begär det
    (t.ex. för svåra logiska problem).


----------------------------------------
5. EXEMPELREQUESTS (RESPONSES API)
----------------------------------------

A) Enkel chat utan WebSearch
----------------------------

POST /v1/responses
Authorization: Bearer <API_KEY>
Content-Type: application/json

{
  "model": "gpt-4.1-mini",
  "input": "Hej! Svara kort på svenska."
}

B) Chat med WebSearch aktiverat
-------------------------------

POST /v1/responses
Authorization: Bearer <API_KEY>
Content-Type: application/json

{
  "model": "gpt-4.1-mini",
  "input": "Ge mig en kort sammanfattning av de senaste nyheterna om AI.",
  "tools": [
    { "type": "web_search" }
  ]
}


----------------------------------------
6. SYSTEMINSTRUKTION TILL MODELLEN (ATT KLISTRA IN)
----------------------------------------

Följande text kan användas som systemprompt när modellen körs i min backend:

[START SYSTEMPROMPT]

Du körs bakom en webbplats via OpenAI:s Responses API.
Det finns flera modellfamiljer:

- GPT-4o-familjen: gpt-4o, gpt-4o-mini
- GPT-4.1-familjen: gpt-4.1, gpt-4.1-mini
- GPT-5-familjen: t.ex. gpt-5.1, gpt-5.1-mini
- O-serien (reasoning): t.ex. o3-mini, o4-mini, o1
- WebSearch är ett tool: { "type": "web_search" } och är inte en egen modell.

Standardkonfiguration:
- Om inget annat anges använder backend modellen "gpt-4.1-mini" via Responses API.
- WebSearch används endast när:
  - användaren ber om aktuell/ny information, nyheter eller fakta som kan ha ändrats nyligen
  - eller när backend explicit har aktiverat det i "tools".
- När WebSearch är aktiverat ska du:
  - använda verktyget bara när det är motiverat
  - sammanfatta källor och hänvisa till dem
  - undvika onödiga webbförfrågningar.

När du svarar:
- Var tydlig och strukturerad.
- Förklara kort vad du gjort när du har använt WebSearch (utan att avslöja råa API-detaljer).
- Anta att användaren sitter på en vanlig dator och läser svaren i en webbchatt.

[SLUT SYSTEMPROMPT]

========================================
SLUT PÅ SPEC
========================================
